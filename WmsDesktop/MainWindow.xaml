<Window x:Class="WmsDesktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:local="clr-namespace:WmsDesktop"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800"
        Loaded="Window_Loaded" Margin="10" KeyDown="Window_KeyDown">

   
    <WindowChrome.WindowChrome>
        <WindowChrome 
            CaptionHeight="30" 
            CornerRadius="0" 
            GlassFrameThickness="0" 
            ResizeBorderThickness="5"/>
    </WindowChrome.WindowChrome>


    <Grid   x:Name="Main">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="{Binding TitleHeight, FallbackValue=30}"/>
            <RowDefinition Height="{Binding MenuTitleHeight, FallbackValue=30}"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border 
            Padding="{Binding TitlePadding}"
                Grid.Row="0" Grid.ColumnSpan="2" 
                Background="{StaticResource TitleColorBrush}" Height="{Binding TitleHeight, FallbackValue=30}" VerticalAlignment="Top">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" >
                <Button Command="{Binding collapseWindow}" Style="{StaticResource WindowControlButton}">_</Button>
                <Button Command="{Binding expandWindow}" Style="{StaticResource WindowControlButton}">[]</Button>
                <Button Margin="{Binding MarginClosedButton}" Command="{Binding closeWindow}" Style="{StaticResource WindowCloseButton}">X</Button>
            </StackPanel>
        </Border>
        <Frame x:Name="MainFrame" NavigationUIVisibility="Hidden" 
                Grid.Column="0" Grid.ColumnSpan="2"
                Grid.Row="1" Grid.RowSpan="2"
                Content="{Binding HomePage}"/>
        <Border Panel.ZIndex="-1" Grid.Row="1" Grid.ColumnSpan="2"
                Padding="{Binding TitleMenuPadding}"
                Height="{Binding MenuTitleHeight}" >
            <StackPanel  x:Name="containerMenuItem"
                        Orientation="Horizontal" 
                        Height="{Binding MenuTitleHeight}" 
                        Background="{StaticResource TitleColorBrush}"
                       >
                <Button 
                     Style="{StaticResource TitleMenuItem}"
                    Command="{Binding callHomeWindow}"
                     Content="Home"
                     />
                <ItemsControl  ItemsSource="{Binding MenuItems}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button Command="{Binding DataContext.selectMenuItem, RelativeSource={RelativeSource AncestorType=Window}}"
                                    CommandParameter="{Binding}"
                                    Style="{StaticResource TitleMenuItem}" 
                                    Content="{Binding Title}" MouseDown="Button_MouseDown"
                                    
                                    >


                            </Button>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                    <ItemsControl.InputBindings>
                        <MouseBinding CommandParameter="{Binding}" Command="{Binding closeMenuItem}" MouseAction="MiddleClick"/>
                    </ItemsControl.InputBindings>
                </ItemsControl>

            </StackPanel>
        </Border>
        <Frame x:Name="PagesFrame" NavigationUIVisibility="Hidden" 
         Grid.Column="0" Grid.ColumnSpan="2"
         Grid.Row="2"
         Panel.ZIndex="-2"
         Content="{Binding CurrentPage}"/>

    </Grid>
</Window>
